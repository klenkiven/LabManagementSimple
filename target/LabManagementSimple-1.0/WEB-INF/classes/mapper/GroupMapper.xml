<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="edu.tyut.selaba2.management.mapper.GroupMapper">

    <resultMap id="groupMap" type="Group">
        <id     property="groupName"        column="group_name"/>
        <result property="departmentName"   column="department_name"/>
        <result property="leaderId"         column="team_leader_id"/>
        <result property="leaderId2"         column="team_leader_id_2"/>
        <result property="leaderId3"         column="team_leader_id_3"/>
        <result property="leaderId4"         column="team_leader_id_4"/>
        <result property="leaderId5"         column="team_leader_id_5"/>
    </resultMap>

    <!-- 检索所有组的信息 -->
    <!-- TODO 这里可以尝试使用分页处理，通过分页处理，然后可以检索信息，暂时这样，其他的以后再说 -->
    <select id="selectAllGroupsList" resultMap="groupMap">
        select * from lab_groups
    </select>

    <!-- 检索指定组的信息 -->
    <select id="selectGroupByName" resultMap="groupMap" parameterType="java.lang.String">
        select * from lab_groups where group_name=#{groupName}
    </select>

    <!-- 修改组的信息 -->
    <update id="updateGroup" parameterType="Group">
        update lab_groups
            <set>
                <if test="departmentName != null and departmentName != ''">department_name = #{departmentName}, </if>
                <if test="leaderId != null and leaderId != 0">team_leader_id = #{leaderId}, </if>
                <if test="leaderId != null and leaderId != 0">team_leader_id_2 = #{leaderId2},</if>
                <if test="leaderId != null and leaderId != 0">team_leader_id_3 = #{leaderId3},</if>
                <if test="leaderId != null and leaderId != 0">team_leader_id_4 = #{leaderId4},</if>
                <if test="leaderId != null and leaderId != 0">team_leader_id_5 = #{leaderId5}</if>
            </set>
        where group_name = #{groupName}
    </update>

    <!-- 插入指定的一个组 -->
    <insert id="insertGroup" parameterType="Group">
        insert into lab_groups (
        <if test="groupName != null and groupName != ''">group_name, </if>
        <if test="departmentName != null and departmentName != ''">department_name, </if>
        <if test="leaderId != null and leaderId != 0">team_leader_id, </if>
        team_leader_id_2,
        team_leader_id_3,
        team_leader_id_4,
        team_leader_id_5
        ) value (
        <if test="groupName != null and groupName != ''">#{groupName}, </if>
        <if test="departmentName != null and departmentName != ''">#{departmentName}, </if>
        <if test="leaderId != null and leaderId != 0">#{leaderId}, </if>
        #{leaderId2},
        #{leaderId3},
        #{leaderId4},
        #{leaderId5}
        )
    </insert>

    <!-- 删除指定名字的组 -->
    <delete id="deleteGroupByName" parameterType="java.lang.String">
        delete from lab_groups
        where group_name = #{groupName}
    </delete>

</mapper>